@using EPiServer.Core
@using EPiServer.Web.Mvc.Html

@model string
<div id="twitch-embed" class="col px-0"></div>
<!-- Load the Twitch embed script -->
<script src="https://embed.twitch.tv/embed/v1.js"></script>
<!-- Create a Twitch.Embed object that will render within the "twitch-embed" root element. -->
<script type="text/javascript">
    var embeded = new Twitch.Embed("twitch-embed", {
        width: "100%",
        height: "100%",
        channel: "@Model",
        theme: "dark",
        layout: "video",
        autoplay: true,
    });

    embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
        var player = embed.getPlayer();
        player.play();
        $("twitch-embed").height($(this).width / 16 * 9);
    });
    
</script>
